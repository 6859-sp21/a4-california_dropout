<html>
  <head>
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://unpkg.com/d3-array@1"></script>
    <script src="https://unpkg.com/d3-collection@1"></script>
    <script src="https://unpkg.com/d3-path@1"></script>
    <script src="https://unpkg.com/d3-shape@1"></script>
    <script src="https://unpkg.com/d3-sankey@0"></script>
  </head>
  <body>
    <h1>6.859: Assignment 4</h1>
    <h2>California School Dropout Rate</h2>

    <div id="chart" style="width:420px;height:420px;">
      <!-- This is where we will put our chart. -->
    </div>

    <script>
      // 1. Data - plotting a couple of points along the y=x line
      const county_ethnic = d3.json("/a4-california_dropout/SankeyData/county-ethnic.json", function(data) {console.log(data);});
      var sankey = d3.sankey();
	    const data = [
        {x:2, y:5},
        {x:3, y:8},
        {x:4, y:3},
        {x:5, y:1},
        {x:6, y:6}
      ];

      // 2. Setting up variables that describe our chart's space.
      const height = 400;
      const width = 400;;
      const margin = ({top: 10, right: 10, bottom: 20, left: 20});

      // 3. Create a SVG we will use to make our chart.
      const svg = d3.create('svg')
        .attr('width', width)
        .attr('height', height);

      // 4. Setting up scales. Create functions to scale pixels
      const xScale = d3.scaleLinear()
        .domain([0, 10])
        .range([margin.left, width - margin.right]);
    
      const yScale = d3.scaleLinear()
        .domain([0, 10])
        .range([height - margin.bottom, margin.top]);
      
      // 5. Drawing our points
      const symbol = d3.symbol();
      svg.append('g')
        .selectAll('path') // d3-shape functions (like d3.symbol) generate attributes for SVG <path> elements
        .data(data) // data need to be defined first
        .join('path') //enter
        .attr('transform', d => `translate(${xScale(d.x)}, ${yScale(d.y)})`) //update
        .attr('d', d => symbol()) // Notice, the output of the d3.symbol is wired up to the "d" attribute.
		//d3 draws the circle for you as long as you call symbol() and assign it to d
      
      //6. Drawing our x-axis
      svg.append('g')
        .attr('transform', `translate(0, ${height - margin.bottom})`)
        .call(d3.axisBottom(xScale)) //draw x axis using scale function

      //7. Drawing our y-axis
      svg.append('g')
        .attr('transform', `translate(${margin.left}, 0)`)
        .call(d3.axisLeft(yScale));

      document.getElementById("chart").appendChild(svg.node());
    </script>
  </body>

  <!-- This adapted from Arvind's observable from lecture. https://observablehq.com/d/4c93c3a516d35624 -->
  <!-- Great D3 intro resource: https://observablehq.com/@d3/learn-d3?collection=@d3/learn-d3 -->
</html>
